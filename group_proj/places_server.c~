/*
 * This is sample code generated by rpcgen.
 * These are only templates and you can use them
 * as a guideline for developing your own functions.
 */

#include "places.h"

const static Place place_array[NUMPLACES];
static int has_file = 0;
void readFile();

readplaces_ret *
readplace_1_svc(Place *argp, struct svc_req *rqstp)
{
    airportlist air;
    airportlist* air_list;
	static readplaces_ret  result;

	/*
	 * insert server code here
	 */

	// Read places if not already read
	/*
	  if(has_file == 0)
	  readfile()
	 */


	/*
	  Call airport server methods instead of this dummy code
	 */

	// dummy code
	air_list = &result.readplaces_ret_u.list;

	*air_list = (Airport*) malloc(sizeof(Airport));
	air = *air_list;
	air->code = "ABC";
	air->name = "Bloop";
	air->state = "WA";
	air->latitude = 0.123;
	air->longitude = 0.123;
	air->next = NULL;
	result.err = 0;
	return &result;
}

void readFile()
{
  // copy readfile code


}
